version: v2
managed:
  enabled: true
plugins:
  - local: .buf-deps/plugins/bin/protoc-gen-prost
    out: api/src
    opt:
      - bytes=.      
      - compile_well_known_types
      - extern_path=.google.protobuf=::pbjson_types
      - file_descriptor_set
      - compile_well_known_types
  - local: .buf-deps/plugins/bin/protoc-gen-prost-serde
    out: api/src
#  - local: .buf-deps/plugins/bin/protoc-gen-prost-validate
#    out: api/src
  - local: .buf-deps/plugins/bin/protoc-gen-prost-crate
    out: api
    strategy: all
    opt:
      - include_file=src/lib.rs
      - gen_crate=api/Cargo.toml
inputs:
  - directory: api/proto